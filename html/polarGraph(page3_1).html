<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="../css/polarGraphStyle.css" />
</head>

<body>

    <div class="polarArea">

        <canvas id="canvasPolar" width="675" height="675">
            이 브라우저는 캔버스를 지원하지 않습니다.
        </canvas>

        <div class="recommedContent">
            <div id="leftButton">
                <span id="leftButtonEvent"></span>
            </div>
            <div id="recommedMessage"></div>
            <div id="rightButton">
                <span id="rightButtonEvent"></span>
            </div>
        </div>

    </div>

    <script src="../js/polarGraph.js"></script>
    <script>
        
        var buttonCount = 0;
        var buttonReverseCount = 0;

        (function () {

            var polarGraph = {};

            var elIds = {
                canvasPolar: 'canvasPolar',
                recommedMessage: 'recommedMessage',
                leftButton: 'leftButton',
                rightButton: 'rightButton',
                leftButtonEvent: 'leftButtonEvent',
                rightButtonEvent: 'rightButtonEvent'
            }

            var properties = {
                graphFontStyle: 'Flexo-Bold',
                userGraphColor: '#95D0CC',
                recommendGraphColor: '#20607A',
                circleFillColor: '#E7EAEA',
                circleShadowColor: '#EEEDE9',
                circleShadowBlur: 50,
                graphRangeValue: 1.8,
                dotText: '●',
                dotFontSize: 8,
                dotFontColor: '#20607A',
                dotFontLocationValue: 0.8,
                bodyPartFontSize: 10,
                bodyPartFontColor: '#333333',
                bodyPartLineColor: '#95D0CC',
                bodyPartLineWidth: 2,
                bodyPartLocationValue: 0.9,
                sizeGapFontSize: 12,
                sizeGapFontColor: '#20607A',
                sizeGapFontLocationValue: 0.62,
                recommendSizeFontSize: 24,
                userInfoFontSize: 11,
                userInfoFontColor: '#FBFBFB',
                buttonOpacity: 0.3,
                buttonCursorIn: 'pointer',
                buttonCursorOut: 'default',
                fontRatio: 2.5,
                userSizeGraphColor: '#95D0CC',
                userSizeGraphGlobalAlpha: 0.8,
                recommendSizeGraphColor: '#20607A',
                recommendSizeGraphLineWidth: 6,
                graphFaceCount: 6,
                userInfoTextAlign: "center",
                animationMotionValue: 10,
                animationMotionFrame: 30
            }

            
            var rightButton = document.getElementById(elIds.rightButtonEvent);
            
            rightButton.addEventListener('click', function event() {
                var recommendSizeKeyLength = Object.keys(recommendSize).length - 1;

                buttonCount += 1;
                buttonReverseCount = 0;

                if (buttonCount - 1 !== recommendSizeKeyLength) {
                    pauseEventListener(rightButton, event);
                }

                if (buttonCount - 1 == recommendSizeKeyLength) {
                    buttonCount--;
                }
            });


            var leftButton = document.getElementById(elIds.leftButtonEvent);
            
            leftButton.addEventListener('click', function event() {

                buttonCount += -1;
                buttonReverseCount = 1;

                if (buttonCount + 1 !== 0) {
                    pauseEventListener(leftButton, event);
                }

                if (buttonCount - 1 == -2) {
                    buttonCount++;
                }
            });


            var pauseEventListener = function (buttonLocation, eventName) {
                polarGraph = new PolarGraph(elIds, properties);

                var eventCount = 0;
                var eventStopInterval = setInterval(function () {
                    buttonLocation.removeEventListener('click', eventName);
                    eventCount++;

                    if (eventCount > properties.animationMotionFrame * 2) {
                        clearInterval(eventStopInterval);
                        buttonLocation.addEventListener('click', eventName);
                    }
                });
            }


            window.onload = function () {
                polarGraph = new PolarGraph(elIds, properties);
            };

        })();
        
    </script>

</body>

</html>